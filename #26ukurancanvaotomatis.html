canvas.width = Math.min(window.innerWidth - 40, maxCols * TILE_SIZE);
canvas.height = maxRows * TILE_SIZE;